recipes = [
    # --- Plate recipes ---
    {
        "name": "Basic Salad",
        "utensil": "plate",
        "taste": {"main": "Great", "variation": None},
        "ingredients": [{"name": "Forest Caps", "qty": 1}, {"name": "Nettle Leaves", "qty": 1}, {"name": "Moss", "qty": 1}],
        "comments": "Fillers: Cooked Wild Garlic OR Birch Sap OR 1 Clover OR 2 Slighty Savoury Cards."
    },
    {
        "name": "Mossy Salad",
        "utensil": "plate",
        "taste": {"main": "Good", "variation": "Great"},
        "ingredients": [{"name": "Moss", "qty": 3}, {"name": "Nettle Leaves", "qty": 2}, {"name": "Forest Caps", "qty": 1}],
        "comments": "Useful if you have a large amount of Moss. Variation: Birch Sap options and replacement with Nettles."
    },
    {
        "name": "Squirrel Snack",
        "utensil": "plate",
        "taste": {"main": "Great", "variation": None},
        "ingredients": [{"name": "Forest Caps", "qty": 1}, {"name": "Nettle Leaves", "qty": 1}, {"name": "Squirrel", "qty": 1}],
        "comments": "Fillers: 1 Clover OR 1 Slighty Savoury Card."
    },
    {
        "name": "Forest Gift",
        "utensil": "plate",
        "taste": {"main": "Great", "variation": None},
        "ingredients": [{"name": "Forest Caps", "qty": 1}, {"name": "Nettle Leaves", "qty": 2}, {"name": "Squirrel", "qty": 2}],
        "comments": "Seasoning: 2 Birch Sap. Variation: Replace squirrels with fish."
    },
    {
        "name": "Extra Leafy Salad (Fresh)",
        "utensil": "plate",
        "taste": {"main": "Good", "variation": "Great if seasoned"},
        "ingredients": [{"name": "Nettle Leaves", "qty": 4}, {"name": "Frost Leaf", "qty": 1}],
        "comments": "Optional: 2 Birch Sap."
    },
    {
        "name": "Extra Leafy Salad",
        "utensil": "plate",
        "taste": {"main": "Good", "variation": "Great if seasoned"},
        "ingredients": [{"name": "Nettle Leaves", "qty": 3}, {"name": "Frost Leaf", "qty": 1}],
        "comments": "Optional: 1 Birch Sap."
    },
    {
        "name": "Pile of Meat",
        "utensil": "plate",
        "taste": {"main": "Good", "variation": None},
        "ingredients": [{"name": "Meat", "qty": 3}],
        "comments": "Seasoning: Roasted Pine Nuts, Frostleaf Powder, Birch Sap."
    },
    {
        "name": "Buttered Meat",
        "utensil": "plate",
        "taste": {"main": "Good", "variation": "Great"},
        "ingredients": [{"name": "Meat", "qty": 2}, {"name": "Fat", "qty": 1}, {"name": "Nettle Leaves", "qty": 1}],
        "comments": "Best combo using 2 meat. Seasoning: Birch Sap. Upgrade: Add Bugs + Frostleaf powder."
    },
    {
        "name": "Spicy Salad",
        "utensil": "plate",
        "taste": {"main": "Great", "variation": None},
        "ingredients": [{"name": "Fireroot", "qty": 1}, {"name": "Nettle Leaves", "qty": 1}, {"name": "Forest Caps", "qty": 1}],
        "comments": "Seasoning: Birch Sap. Variation: Fireroot D + Fat."
    },
    {
        "name": "Lucky Early Turnroot",
        "utensil": "plate",
        "taste": {"main": "Good", "variation": "Great"},
        "ingredients": [{"name": "Turnroot", "qty": 1}, {"name": "Squirrel", "qty": 1}, {"name": "Nettle Leaves", "qty": 1}],
        "comments": "Variation: add Nettles + Forest Caps + Birch Sap for Great."
    },
    {
        "name": "Turnroot Harvest",
        "utensil": "plate",
        "taste": {"main": "Great", "variation": None},
        "ingredients": [{"name": "Turnroot", "qty": 2}, {"name": "Nettle Leaves", "qty": 1}, {"name": "Fat", "qty": 1}],
        "comments": "Variation: Replace Turnroot with Pine nuts."
    },
    {
        "name": "Frost Turnroots",
        "utensil": "plate",
        "taste": {"main": "Great", "variation": None},
        "ingredients": [{"name": "Turnroot", "qty": 2}, {"name": "Fat", "qty": 1}],
        "comments": "Seasoning: Frostleaf. Optional extra Fat, Birch Sap."
    },
    {
        "name": "Eggs & Mushrooms",
        "utensil": "plate",
        "taste": {"main": "Great", "variation": None},
        "ingredients": [{"name": "Eggs", "qty": 4}, {"name": "Nettle Leaves", "qty": 3}, {"name": "Forest Caps", "qty": 1}],
        "comments": "Optional: 2 Birch Sap."
    },
    {
        "name": "Springberries",
        "utensil": "plate",
        "taste": {"main": "Great", "variation": None},
        "ingredients": [{"name": "Meat", "qty": 1}, {"name": "Fat", "qty": 1}, {"name": "Nettle Leaves", "qty": 1}, {"name": "Forest Caps", "qty": 1}, {"name": "Springberries", "qty": 1}],
        "comments": "Optional: Fat + Birch Sap."
    },
    {
        "name": "Extra sweet meat",
        "utensil": "plate",
        "taste": {"main": "Great", "variation": None},
        "ingredients": [{"name": "Meat", "qty": 3}],
        "comments": "Seasoning: Springberry Must, Birch Sap, Frostleaf Powder."
    },
    {
        "name": "Meat Lunchbox",
        "utensil": "plate",
        "taste": {"main": "Good", "variation": "Great"},
        "ingredients": [{"name": "Meat", "qty": 1}, {"name": "Forest Caps", "qty": 1}],
        "comments": "Optional Seasoning: Frost Leaf, Garlic, Birch Sap."
    },

    # --- Acorn Flatbread recipes ---
    {
        "name": "Leafy Sandwhich",
        "utensil": "acorn flatbread",
        "taste": {"main": "Good", "variation": "Great if seasoned"},
        "ingredients": [{"name": "Forest Caps", "qty": 1}, {"name": "Nettle Leaves", "qty": 1}, {"name": "Meat", "qty": 1}],
        "comments": "Seasoning: 4 Birch Sap. Optional: Fat."
    },
    {
        "name": "Forest Hamburger",
        "utensil": "acorn flatbread",
        "taste": {"main": "Great", "variation": None},
        "ingredients": [{"name": "Meat", "qty": 1}, {"name": "Fat", "qty": 1}],
        "comments": "Seasoning: Roasted Pine Nuts, Frostleaf Powder, Birch Sap."
    },
    {
        "name": "Dangerous Hamburguer",
        "utensil": "acorn flatbread",
        "taste": {"main": "Good", "variation": "Great if seasoned"},
        "ingredients": [{"name": "Meat", "qty": 1}, {"name": "Fireroot", "qty": 1}],
        "comments": "Seasoning: Birch Sap + Frostleaf Powder. Variation: Fireroot D reduces taste."
    },
    {
        "name": "Spicy Bread",
        "utensil": "acorn flatbread",
        "taste": {"main": "Great", "variation": None},
        "ingredients": [{"name": "Forest Caps", "qty": 1}, {"name": "Fireroot", "qty": 1}, {"name": "Egg", "qty": 1}],
        "comments": "Variation: Nettle leaves + Egg OR Moderately Savoury Card."
    },
    {
        "name": "Turnroot Vegetarian Sandwhich",
        "utensil": "acorn flatbread",
        "taste": {"main": "Great", "variation": None},
        "ingredients": [{"name": "Turnroot", "qty": 1}, {"name": "Forest Caps", "qty": 1}],
        "comments": "Optional: Fat. Filler if Turnroot D: add Forest Caps + Birch Sap."
    },
    {
        "name": "Turnroot Carnivore Sandwhich",
        "utensil": "acorn flatbread",
        "taste": {"main": "Great", "variation": None},
        "ingredients": [{"name": "Turnroot", "qty": 1}, {"name": "Meat", "qty": 1}],
        "comments": "Simple and easy, no seasoning needed."
    },
    {
        "name": "Sweet Eggs & Bread",
        "utensil": "acorn flatbread",
        "taste": {"main": "Good", "variation": "Great"},
        "ingredients": [{"name": "Eggs", "qty": 5}, {"name": "Nettle Leaves", "qty": 1}, {"name": "Fat", "qty": 1}],
        "comments": "Seasoning: Birch Sap. Variation: Birch Syrup."
    },
    {
        "name": "Root Lunchbox",
        "utensil": "acorn flatbread",
        "taste": {"main": "Great", "variation": None},
        "ingredients": [{"name": "Turnroot", "qty": 1}, {"name": "Nettle Leaves", "qty": 1}],
        "comments": "Seasoning: Fat + Birch Sap. Optional Egg."
    },
    {
        "name": "Hot and Cold Lunchbox",
        "utensil": "acorn flatbread",
        "taste": {"main": "Good", "variation": None},
        "ingredients": [{"name": "Fireroot", "qty": 1}, {"name": "Fat", "qty": 1}, {"name": "Nettle Leaves", "qty": 1}],
        "comments": "Seasoning: Frost Leaf + Birch Sap."
    },

    # --- Cauldron recipes ---
    {
        "name": "Leafy Potage",
        "utensil": "cauldron",
        "taste": {"main": "Great", "variation": None},
        "ingredients": [{"name": "Moss", "qty": 3}, {"name": "Forest Caps", "qty": 3}, {"name": "Nettle Leaves", "qty": 3}],
        "comments": "Fillers: Nettles, Forest Caps, Frostleaf, Savory. Vegetarian."
    },
    {
        "name": "Hunter's Potage",
        "utensil": "cauldron",
        "taste": {"main": "Good", "variation": None},
        "ingredients": [{"name": "Meat", "qty": 4}, {"name": "Fat", "qty": 1}, {"name": "Cut Fireroot", "qty": 1}, {"name": "Nettle Leaves", "qty": 1}],
        "comments": "Variation: Replace Nettles with Frostleaf."
    },
    {
        "name": "Liquified Turnroot",
        "utensil": "cauldron",
        "taste": {"main": "Great", "variation": None},
        "ingredients": [{"name": "Turnroot", "qty": 3}, {"name": "Fat", "qty": 1}, {"name": "Frostleaf", "qty": 1}, {"name": "Meat", "qty": 2}],
        "comments": "Fillers: Nettle Leaves, Forest Caps, Clover, Squirrel."
    }
]
ingredients_dict = {
    1: "Forest Caps",
    2: "Nettle Leaves",
    3: "Moss",
    4: "Squirrel",
    5: "Frostleaf",
    6: "Meat",
    7: "Fat",
    8: "Fireroot",
    9: "Turnroot",
    10: "Eggs",
    11: "Springberries"
}


def parse_inventory(input_str: str):
    """
    Преобразует строку вида '1,3 4,1 5,4' в словарь {id: qty}
    """
    inventory = {}
    parts = input_str.strip().replace(" ,", " ").replace(", ", " ").split()
    for part in parts:
        if "," in part:
            idx, qty = part.split(",")
            inventory[int(idx)] = int(qty)
    return inventory


def can_cook(recipe, inventory, ingredients_dict):
    """
    Проверяет, можно ли приготовить блюдо из inventory
    """
    for ing in recipe["ingredients"]:
        # находим id ингредиента по имени
        ing_id = None
        for k, v in ingredients_dict.items():
            if v == ing["name"]:
                ing_id = k
                break
        if ing_id is None:
            return False  # ингредиент неизвестен
        if inventory.get(ing_id, 0) < ing["qty"]:
            return False
    return True


def cookable_recipes(recipes, inventory, ingredients_dict):
    """
    Возвращает список возможных блюд
    """
    possible = []
    for recipe in recipes:
        if can_cook(recipe, inventory, ingredients_dict):
            possible.extend(({recipe["name"]}, [f'{i["name"]}: {i["qty"]}'for i in recipe["ingredients"]]))
    return possible

# === ===

for id, dish in ingredients_dict.items():
    print(f'{id}: {dish}')

inventory_str = input()
inventory = parse_inventory(inventory_str)

# получаем возможные блюда
possible = cookable_recipes(recipes, inventory, ingredients_dict)

print("Возможные блюда:")
for dish in possible:
    print("-", dish)

input()